name: Simple VPS SSH Login

on:
  workflow_dispatch:

env:
  SSH_HOST: ${{ secrets.SSH_HOST }}
  SSH_USER: ${{ secrets.SSH_USER }}
  SSH_KEY: ${{ secrets.SSH_KEY }}
  PASSPHRASE: ${{ secrets.VPS_SSH_PASSPHRASE }}
  SSH_PORT: ${{ secrets.SSH_PORT }}

jobs:
  ssh-login-test:
    runs-on: ubuntu-latest

    steps:
      - name: SSH into VPS
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ env.SSH_HOST }}
          username: ${{ env.SSH_USER }}
          key: ${{ env.SSH_KEY }}
          passphrase: ${{ env.PASSPHRASE }}
          port: ${{ env.SSH_PORT }}
          script: |
            echo "âœ… SSH login successful"
            whoami
            hostname
            uptime
